#!/bin/bash

#FG_METRIC="-metrics "
FG_METRIC=""

kafka-console-producer -brokers localhost:9092 -key ctmetrics ${FG_METRIC} -topic ct-metrics -value "{\"sourceType\":\"trading_chain\",\"msgType\":\"system_health_status\",\"data\":{\"optiqSegment\":2,\"optiqSegmentName\":\"ETF\",\"optiqPartitions\":[{\"partitionId\":20,\"partitionNumber\":0,\"serverName\":\"ETF.0\",\"instanceType\":\"primary\",\"publicationTime\":1501681526043505019,\"period\":10,\"expectedCoresCount\":12,\"cpuCores\":[{\"core\":5,\"tredzoneTotalLoops\":27905064,\"tredzoneUsedLoops\":209821,\"maxEventsPerLoop\":5,\"eventsCount\":290592,\"coreUsage_percent\":0.7157471845636813,\"avgEventsPerLoop\":0.010413593747715469},{\"core\":2,\"tredzoneTotalLoops\":28071044,\"tredzoneUsedLoops\":111996,\"maxEventsPerLoop\":2,\"eventsCount\":113569,\"coreUsage_percent\":0.5241338476240506,\"avgEventsPerLoop\":0.004045770438748199},{\"core\":6,\"tredzoneTotalLoops\":29686681,\"tredzoneUsedLoops\":0,\"maxEventsPerLoop\":0,\"eventsCount\":0,\"coreUsage_percent\":0.0017811298882018129,\"avgEventsPerLoop\":0.0},{\"core\":4,\"tredzoneTotalLoops\":18418243,\"tredzoneUsedLoops\":168195,\"maxEventsPerLoop\":3,\"eventsCount\":181685,\"coreUsage_percent\":1.785139420617196,\"avgEventsPerLoop\":0.009864404547165548},{\"core\":3,\"tredzoneTotalLoops\":19044153,\"tredzoneUsedLoops\":176546,\"maxEventsPerLoop\":3,\"eventsCount\":181605,\"coreUsage_percent\":1.8007434642267564,\"avgEventsPerLoop\":0.009535997741669057},{\"core\":0,\"tredzoneTotalLoops\":3308,\"tredzoneUsedLoops\":2165,\"maxEventsPerLoop\":1827,\"eventsCount\":395553,\"coreUsage_percent\":31.168574208110756,\"avgEventsPerLoop\":119.57466747279323},{\"core\":11,\"tredzoneTotalLoops\":29172172,\"tredzoneUsedLoops\":0,\"maxEventsPerLoop\":0,\"eventsCount\":0,\"coreUsage_percent\":0.001955081862932391,\"avgEventsPerLoop\":0.0},{\"core\":7,\"tredzoneTotalLoops\":30368759,\"tredzoneUsedLoops\":0,\"maxEventsPerLoop\":0,\"eventsCount\":0,\"coreUsage_percent\":0.001798551233531207,\"avgEventsPerLoop\":0.0},{\"core\":8,\"tredzoneTotalLoops\":29732016,\"tredzoneUsedLoops\":0,\"maxEventsPerLoop\":0,\"eventsCount\":0,\"coreUsage_percent\":0.0017731384824548058,\"avgEventsPerLoop\":0.0},{\"core\":9,\"tredzoneTotalLoops\":29876616,\"tredzoneUsedLoops\":0,\"maxEventsPerLoop\":0,\"eventsCount\":0,\"coreUsage_percent\":0.0017863597900402407,\"avgEventsPerLoop\":0.0},{\"core\":10,\"tredzoneTotalLoops\":29429035,\"tredzoneUsedLoops\":0,\"maxEventsPerLoop\":0,\"eventsCount\":0,\"coreUsage_percent\":0.0017897543537893576,\"avgEventsPerLoop\":0.0},{\"core\":1,\"tredzoneTotalLoops\":8075671,\"tredzoneUsedLoops\":5497064,\"maxEventsPerLoop\":30,\"eventsCount\":6267734,\"coreUsage_percent\":80.96879018356647,\"avgEventsPerLoop\":0.7761254761369055}],\"kafkaUsages\":[{\"topic\":\"OE\",\"partitions\":[]},{\"topic\":\"ME\",\"partitions\":[]}]}]}}"


